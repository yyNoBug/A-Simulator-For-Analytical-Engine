//window.buildinfo = document.querySelector("div.container-fluid pre").innerHTML;
window.buildinfo = 
"Step 1:\n\
~ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
Step 2:\n\
~ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
Step 3:\n\
~ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 1 7 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
Step 4:\n\
+ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 1 7 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
Step 5:\n\
+ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 1 7 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
Step 6:\n\
+ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 1 7 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
Step 7:\n\
+ -\n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 2 5 \n\
0 0 0 0 0 0 1 7 \n\
0 0 0 0 0 0 4 2 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
0 0 0 0 0 0 0 0 \n\
42\n\
"

// items below are data to be presented
const num_reg = 10;
const digits = 8;

//Initializing data_set
var data = new Object();
var data_set = new Object();
data_set.size = 0;
data_set.content = new Array();
data_set.content[0] = new Object();
data_set.content[0].op = "~";
data_set.content[0].runup = 0;
data_set.content[0].digits = new Array();
for (var i = 0; i < 5 + num_reg; ++i) {
    data_set.content[0].digits[i] = new Array();
    for (var j = 0; j < digits; ++j) {
        data_set.content[0].digits[i][j] = 0;
    }
}
data_set.content[data_set.size].output = "";
data = data_set.content[0];


function cal_digit(num) {
    ans = 0;
    while (num) {
        ans++;
        num = parseInt(num / 10);
    }
    return ans;
}

function readin() {
    input_length = buildinfo.length;
    read_length = 0;
    while (read_length < input_length) {
        data_set.size++;

        var start = read_length + 11 + cal_digit(data_set.size);
        var sub = buildinfo.slice(start, input_length);
        var end = sub.search("Step", start + 10);
        if (end == -1) end = input_length;
        
        read_length = start + end;

        
        data_set.content[data_set.size] = new Object();
        var data_cur = data_set.content[data_set.size];
        var data_pre = data_set.content[data_set.size - 1];
        data_cur.op = buildinfo[start - 4];
        data_cur.runup = buildinfo[start - 2];
        data_cur.digits = new Array();

        for (var i = 0; i < 5 + num_reg; ++i) {
            data_cur.digits[i] = new Array();
            for (var j = 0; j < digits; ++j) {
                data_cur.digits[i][j] = data_pre.digits[i][j];
            }
        }

        var cnt = 0;
        //var sub = buildinfo.slice(start, end);
        for (var i = 0; i < 5 + num_reg; ++i) {
            //data_set.content[data_set.size].digits[i] = new Array();
            for (var j = 0; j < digits; ++j) {
                data_set.content[data_set.size].digits[i][j] = parseInt(sub[cnt]);
                cnt += 2;
            }
            cnt++;
        }
        data_set.content[data_set.size].output = sub.slice(cnt, end);
    }
}


// TODO: get data from buildinfo
function get_data(){
    data = data_set.content[curStep];
    output_added += data.output;
    curStep++;
}

var output_added = "";

function get_output() {
    t = document.getElementById("text");
    if (output_added) {
        t.innerHTML += output_added;
        t.innerHTML += "<br>";
    }
    output_added = "";
}